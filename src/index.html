<!doctype html>
<html lang="fr" class="h-full">
<head>
  <meta charset="utf-8">
  <title>YaoundéConnect - Votre guide urbain interactif</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Explorez Yaoundé comme jamais auparavant. Découvrez les meilleurs restaurants, hôtels, attractions et services de la capitale camerounaise.">
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/favicon-16x16.png">
  
  <!-- Font Awesome (pour les icônes supplémentaires si nécessaire) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Leaflet CSS pour la carte -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin=""/>
  
  <!-- Script pour gérer le thème avant le chargement de l'app -->
  <script>
    // Éviter le flash de thème incorrect
    (function() {
      const theme = localStorage.getItem('yaoundeconnect_theme');
      if (theme === 'dark' || (!theme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
        document.querySelector('meta[name="theme-color"]').setAttribute('content', '#1f2937');
      }
    })();
  </script>
  
  <style>
    /* Styles de chargement initial */
    .app-loading {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #ffffff;
      z-index: 9999;
      transition: opacity 0.3s ease-out;
    }
    
    .dark .app-loading {
      background-color: #111827;
    }
    
    .loading-content {
      text-align: center;
    }
    
    .loading-logo {
      width: 80px;
      height: 80px;
      margin: 0 auto 20px;
      animation: pulse 2s ease-in-out infinite;
    }
    
    .loading-logo svg {
      width: 100%;
      height: 100%;
    }
    
    .loading-text {
      font-size: 24px;
      font-weight: bold;
      color: #4f46e5;
      margin-bottom: 10px;
      font-family: system-ui, -apple-system, sans-serif;
    }
    
    .loading-spinner {
      width: 40px;
      height: 40px;
      margin: 20px auto;
      border: 3px solid #e5e7eb;
      border-top-color: #4f46e5;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    .dark .loading-spinner {
      border-color: #374151;
      border-top-color: #818cf8;
    }
    
    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
        opacity: 1;
      }
      50% {
        transform: scale(1.1);
        opacity: 0.8;
      }
    }
    
    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }
    
    /* Smooth transition pour le thème */
    * {
      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
    }
  </style>
</head>
<body class="h-full">
  <!-- Écran de chargement initial -->
  <div class="app-loading" id="app-loading">
    <div class="loading-content">
      <div class="loading-logo">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z" fill="#e2e546ff"/>
          <circle cx="12" cy="9" r="2.5" fill="white"/>
        </svg>
      </div>
      <div class="loading-text">YaoundéConnect</div>
      <div class="loading-spinner"></div>
    </div>
  </div>
  
  <!-- Application Angular -->
  <app-root></app-root>
  
  <!-- Script pour masquer l'écran de chargement -->
  <script>
    window.addEventListener('load', function() {
      setTimeout(function() {
        const loader = document.getElementById('app-loading');
        if (loader) {
          loader.style.opacity = '0';
          setTimeout(function() {
            loader.style.display = 'none';
          }, 300);
        }
      }, 100);
    });
  </script>
</body>
</html>